# GPIO与延时函数学习


## GPIO工作模式原理
### 推挽输出
由一对互补的P-MOS和N-MOS晶体管组成  
P-MOS导通，N-MOS截止时P-MOS管直接连接到电源，输出高电平，反之输出低电平   
### 开漏输出
只有N-MOS，导通时引脚连接到地 GND，输出低电平  
截止时依赖外部电路的上拉电阻将电平拉高   


## 延时函数
### 阻塞延时函数
阻塞延时函数使CPU在这段时间内无法运作 
原理是内层循环消耗时间为1ms(晶振是 11.0592MHz)  
执行一条指令通常需要1-2个机器周期，一个机器周期约1.09微秒，执行110次循环约1ms     
```csc  
void Delay_ms(unsigned int n) {  
    unsigned int i, j;  
    for(i = 0; i < n; i++) {           // 外层循环控制毫秒数，括号内参数代表延迟多少ms 
        for(j = 0; j < 110; j++) {     // 内层循环消耗约1ms的时间  
            ; // 空语句，什么都不做  
        }  
    }  
}  
```  
使LED闪烁 
```csc
sbit LED=P1^0;
void main(){
    while(1){
        LED=0;//低电平使点亮
        Delay_ms(100);
        LED=1；//高电平使熄灭
        Delay_ms(100);
    }
}
```
